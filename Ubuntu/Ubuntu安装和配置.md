# Ubuntu å®‰è£…å’Œé…ç½®

## å¤šç³»ç»Ÿå¯åŠ¨Uç›˜åˆ¶ä½œ

### ä¸‹è½½Ubuntu ISOé•œåƒ
[æ¸…åå¤§å­¦é•œåƒç«™](https://mirrors.tuna.tsinghua.edu.cn/ubuntu-releases/)
ä¸‹è½½`ubuntu-24.04.4-desktop-amd64.iso`

### åˆ¶ä½œæ­¥éª¤
1. ä¸‹è½½ [Ventoy](https://www.ventoy.net/en/download.html)ã€‚
2. è§£å‹åè¿è¡Œ Ventoy2Disk.exe
3. æ’å…¥ U ç›˜ï¼Œç‚¹å‡»"å®‰è£…"ï¼ˆä¼šæ ¼å¼åŒ– U ç›˜ï¼‰
4. åœ¨Uç›˜åˆ›å»ºä¸€ä¸ª`ISOæ–‡ä»¶å¤¹`å°† Windows.iso æˆ–è€… Ubuntu.iso å¤åˆ¶åˆ° U ç›˜
5. è¿è¡ŒVentoyPlugin.exe
6. ç‚¹å‡»å…¨å±€æ§åˆ¶æ’ä»¶, æ›´æ”¹èœå•è¯­è¨€ä¸º: `zh_CN`, è®¾ç½®æŒ‡å®šæœç´¢ç›®å½•ä¸º: `ISOæ–‡ä»¶å¤¹`
7. é€€å‡ºVentoyPluginå¹¶ä¿å­˜

## åŒç³»ç»Ÿå®‰è£…Ubuntu

### ç£ç›˜åˆ†åŒº
1. æ‰“å¼€ç£ç›˜ç®¡ç†å·¥å…·ï¼ˆWin + X -> ç£ç›˜ç®¡ç†ï¼‰
2. æ‰¾åˆ°è¦å®‰è£…Ubuntuçš„ç£ç›˜, å³é”®ç‚¹å‡», é€‰æ‹©"å‹ç¼©å·"
3. è®¾ç½®å‹ç¼©ç©ºé—´å¤§å°, ç‚¹å‡»"å‹ç¼©", å‹ç¼©åä¼šå‡ºç°ä¸€ä¸ªæœªåˆ†é…ç©ºé—´

> æ³¨æ„: å‹ç¼©ç©ºé—´å¤§å°è¦è¶³å¤Ÿå¤§, è¶³ä»¥å®‰è£…Ubuntuç³»ç»Ÿä»¥åŠæ—¥å¸¸ä½¿ç”¨, å»ºè®®100GBä»¥ä¸Š

### å…³é—­å¿«é€Ÿå¯åŠ¨(Fast Boot)å’Œå®‰å…¨å¯åŠ¨ (Secure Boot)
- å…³é—­å¿«é€Ÿå¯åŠ¨
1. æ‰“å¼€æ§åˆ¶é¢æ¿ -> ç¡¬ä»¶å’Œå£°éŸ³ -> ç”µæºé€‰é¡¹
2. ç‚¹å‡»"é€‰æ‹©ç”µæºæŒ‰é’®çš„åŠŸèƒ½"
3. å–æ¶ˆå‹¾é€‰"å¯ç”¨å¿«é€Ÿå¯åŠ¨"
4. ç‚¹å‡»"ä¿å­˜æ›´æ”¹"
- å…³é—­å®‰å…¨å¯åŠ¨
1. é‡å¯ç”µè„‘
2. è¿›å…¥BIOSè®¾ç½®ï¼ˆé€šå¸¸æŒ‰ F2/F12/Delete é”®ï¼‰
3. è¿›å…¥ Security â†’ Secure Boot Configuration 
4. å°† Secure Boot è®¾ç½®ä¸º [Disabled]
5. æŒ‰ F10 ä¿å­˜å¹¶é€€å‡º 

### å¯åŠ¨Uç›˜å¹¶é€‰æ‹©Ventoyå¼€å§‹å®‰è£…
1. ç¡®ä¿Uç›˜å·²æ’å…¥ç”µè„‘
2. é‡å¯ç”µè„‘
3. æŒ‰ F12/F11/ESC è¿›å…¥å¯åŠ¨èœå•
4. é€‰æ‹©ä» U ç›˜å¯åŠ¨
5. çœ‹åˆ°Ventoy å¯åŠ¨èœå•ç•Œé¢è¯´æ˜æˆåŠŸ
6. ç”¨æ–¹å‘é”®é€‰æ‹©è¦å¯åŠ¨çš„ç³»ç»Ÿ
7. æŒ‰ Enter ç¡®è®¤è¿›å…¥ä»¥æ­£å¸¸æ¨¡å¼å¯åŠ¨
8. è¿›å…¥ GRUB èœå•é€‰æ‹© "Install Ubuntu" æˆ– "Try Ubuntu without installing" å¼€å§‹å®‰è£…æµç¨‹

### å®‰è£…å‘å¯¼ - åŸºç¡€è®¾ç½®

- **è¯­è¨€é€‰æ‹©**ï¼šä¸­æ–‡ï¼ˆå¯é€‰ï¼‰
- **å®‰è£…ç±»å‹**ï¼šäº¤äº’å¼å®‰è£…
- **åº”ç”¨ç¨‹åº**ï¼šé»˜è®¤é›†åˆ
- **ä¸“æœ‰è½¯ä»¶**ï¼šå‹¾é€‰ä»¥ä¸‹é€‰é¡¹
  - ä¸ºå›¾å½¢å’Œ Wi-Fi ç¡¬ä»¶å®‰è£…ç¬¬ä¸‰æ–¹è½¯ä»¶
  - ä¸‹è½½å¹¶å®‰è£…å¯¹å…¶ä»–åª’ä½“æ ¼å¼çš„æ”¯æŒ
- **åˆ†åŒºè®¾ç½®**: [æ‰‹åŠ¨åˆ†åŒº](#æ‰‹åŠ¨åˆ†åŒº)
- **è®¾ç½®ç”¨æˆ·è´¦æˆ·**  
  - æ´»åŠ¨ç›®å½•ï¼ˆä¸å‹¾é€‰ï¼‰
- **ç¡®è®¤å¹¶å®‰è£…** 
  - å®‰è£…å®Œæˆåé‡å¯, ç§»é™¤Uç›˜

### æ‰‹åŠ¨åˆ†åŒº
å¯¹æœªåˆ†é…ç©ºé—´è¿›è¡Œåˆ†åŒº:

| åˆ†åŒº | å¤§å°æ¨è | ç±»å‹ | è¯´æ˜ |
|------|----------|------|------|
| EFI | 100~500 MB | ä½¿ç”¨ç°æœ‰åˆ†åŒº | æŒ‚è½½ç‚¹ï¼š`/boot/efi` |
| swap | å†…å­˜ 2 å€ | äº¤æ¢åˆ†åŒº | ä¼‘çœ åŠŸèƒ½éœ€è¦ â‰¥ å†…å­˜å¤§å° |
| / | 50~100 GB | Ext4 | ç³»ç»Ÿåˆ†åŒºï¼ŒæŒ‚è½½ç‚¹ï¼š`/` |
| /home | å‰©ä½™ç©ºé—´ | Ext4 | ç”¨æˆ·æ•°æ®ï¼ŒæŒ‚è½½ç‚¹ï¼š`/home` | 

> æ–°åˆ†åŒºå‹¾é€‰"æ ¼å¼åŒ–"

åˆ†åŒºç¤ºä¾‹:

![img](https://img2024.cnblogs.com/blog/3471133/202602/3471133-20260218000030232-804104104.jpg)

### åŒç³»ç»Ÿåˆ‡æ¢

å¼€æœº â†’ GRUB èœå• â†’ é€‰æ‹©ç³»ç»Ÿï¼š

| é€‰é¡¹ | æ“ä½œ |
|------|------|
| Ubuntu | æŒ‰ Enter è¿›å…¥ Ubuntu |
| Windows Boot Manager | æŒ‰ Enter è¿›å…¥ Windows |  

## UbuntuåŸºç¡€é…ç½®

1. æ›´æ–°ç³»ç»Ÿ
   ```bash
   sudo apt update && sudo apt upgrade
   ```

2. è®¾ç½®æ—¶é—´åŒæ­¥
   ```bash
   sudo timedatectl set-local-rtc 1 --adjust-system-clock
   ```

3. æ›´æ¢è½¯ä»¶æº
æ‰“å¼€â€œè½¯ä»¶ä¸æ›´æ–°â€ ç¨‹åº, é€‰æ‹©â€œUbuntuè½¯ä»¶â€é€‰é¡¹å¡, æ›´æ”¹ä¸‹è½½è‡ª: é€‰æ‹©å…¶ä»– -> ä¸­å›½ -> `mirrors.cloud.tencent.com`

## å…¨é¢åˆ é™¤Snap
```bash
# æŸ¥çœ‹å·²å®‰è£…çš„Snapè½¯ä»¶
sudo snap list

# å¸è½½æ‰€æœ‰Snapè½¯ä»¶
sudo snap remove --purge <package-name>
# åˆ é™¤é¡ºåº: firefox, firmware-updater, snap-store, gnome-42-2204, gtk-common-themes, snapd-desktop-integration, bare, core22, snapd

# å¸è½½ snapd
sudo apt autoremove --purge snapd

# æ¸…ç†æ®‹ç•™æ–‡ä»¶
sudo rm -rf /var/cache/snapd /var/lib/snapd ~/snap /snap

# é˜²æ­¢ Snap è‡ªåŠ¨é‡æ–°å®‰è£…
# åˆ›å»º apt åå¥½è®¾ç½®æ–‡ä»¶
sudo nano /etc/apt/preferences.d/nosnap.pref
# æ·»åŠ å†…å®¹ï¼š
Package: snapd
Pin: release a=*
Pin-Priority: -10
# Ctrl + O å¹¶æŒ‰ Enter ä¿å­˜
# Ctrl + X é€€å‡º

# æ£€æŸ¥æ˜¯å¦ç³»ç»Ÿæœ‰Snapæ®‹ç•™
# æ£€æŸ¥æ˜¯å¦æœ‰Snapè½¯ä»¶åŒ… (éœ€è¦è‡ªè¡Œåˆ¤æ–­åˆ é™¤ -> ä½¿ç”¨ sudo apt remove --purge <package-name>)
dpkg -l | grep snap
# è‡ªåŠ¨åˆ é™¤ä¸å†è¢«ä»»ä½•å·²å®‰è£…è½¯ä»¶ä¾èµ–çš„"å­¤å„¿"åŒ…
sudo apt autoremove
# æ£€æŸ¥snapå‘½ä»¤æ˜¯å¦å­˜åœ¨ (æ— è¾“å‡º -> Snapå‘½ä»¤è¡Œå·¥å…·å·²åˆ é™¤)
which snap
# æ£€æŸ¥æ˜¯å¦æœ‰SnapæœåŠ¡ (æç¤º Unit snapd.service could not be found -> è¯´æ˜SnapæœåŠ¡å·²åˆ é™¤)
systemctl status snapd
# æ£€æŸ¥apté‡Œçš„snapdæ˜¯å¦å½»åº•åˆ é™¤ (æ˜¾ç¤ºå·²å®‰è£…:(æ— ); å€™é€‰:(æ— ) -> snapdåŒ…å½»åº•åˆ é™¤, ä¸”APTå·²é…ç½®ä¸å®‰è£…Snap)
apt policy snapd
# æ£€æŸ¥æ˜¯å¦æœ‰SnapæŒ‚è½½ç‚¹ (æ— è¾“å‡º -> æ²¡æœ‰SnapæŒ‚è½½ç‚¹)
mount | grep snap
```

## æ€§èƒ½ä¼˜åŒ–

è¯·æŒ‰ç…§ä»¥ä¸‹ **4 ä¸ªæ­¥éª¤** æ“ä½œï¼š

### 1. åˆ›å»ºè„šæœ¬æ–‡ä»¶
æ‰“å¼€ç»ˆç«¯ï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤åˆ›å»ºä¸€ä¸ªåä¸º `optimize.sh` çš„æ–‡ä»¶ï¼š
```bash
nano optimize.sh
```

### 2. ç²˜è´´ä»£ç 
å°†ä¸‹æ–¹æˆ‘æ•´ç†å¥½çš„å®Œæ•´ä»£ç ï¼ˆåŸºäºä½ çš„ä¿®æ­£æ–¹æ¡ˆï¼Œå¢åŠ äº†å®¹é”™å¤„ç†ï¼‰ç›´æ¥å¤åˆ¶ï¼Œç„¶ååœ¨ç»ˆç«¯é‡ŒæŒ‰ `Ctrl+Shift+V` ç²˜è´´è¿›å»ï¼š

```bash
#!/bin/bash
set -e  # ä»»ä½•å‘½ä»¤å¤±è´¥æ—¶é€€å‡º

# æ£€æŸ¥æ˜¯å¦ä»¥ root æƒé™è¿è¡Œ
if [ "$EUID" -ne 0 ]; then 
    echo "âŒ è¯·ä½¿ç”¨ sudo è¿è¡Œæ­¤è„šæœ¬"
    exit 1
fi

# 0. è„šæœ¬å¼€å§‹ï¼Œæ‰“å°æç¤º
echo "ğŸš€ å¼€å§‹ç³»ç»Ÿæ€§èƒ½ä¼˜åŒ–..."

# 1. æ›´æ–°è½¯ä»¶æº
echo "ğŸ“¦ æ›´æ–°è½¯ä»¶æº..."
sudo apt update && sudo apt upgrade -y

# 2. å®‰è£… zram-tools
echo "ğŸ”§ å®‰è£… zram-tools..."
sudo apt install zram-tools -y

# 3. é…ç½® ZRAM (è¦†ç›–æ¨¡å¼å†™å…¥é…ç½®)
# é’ˆå¯¹ 8G å†…å­˜ï¼Œè®¾ç½® 60% å¤§å°æ¯”è¾ƒåˆç†ï¼Œç®—æ³•ä½¿ç”¨ lz4 å…¼é¡¾é€Ÿåº¦
echo "âš™ï¸ é…ç½® ZRAM å‚æ•°..."
sudo tee /etc/default/zramswap > /dev/null <<EOF
ALGO=lz4
PERCENT=60
PRIORITY=100
EOF

# 4. é‡å¯ ZRAM æœåŠ¡ä»¥åº”ç”¨æ›´æ”¹
echo "ğŸ”„ é‡å¯ ZRAM æœåŠ¡..."
sudo systemctl restart zramswap.service

# 5. ä¿®æ”¹å†…æ ¸å‚æ•° (sysctl.conf)
echo "ğŸ“ ä¼˜åŒ–å†…æ ¸å‚æ•° (å†…å­˜å€¾å‘ & ç£ç›˜è„é¡µ)..."

# å®šä¹‰ä¸€ä¸ªå‡½æ•°æ¥å®‰å…¨ä¿®æ”¹ sysctl.conf
# å¦‚æœå‚æ•°å­˜åœ¨åˆ™ä¿®æ”¹ï¼Œä¸å­˜åœ¨åˆ™è¿½åŠ 
update_sysctl() {
    key=$1
    value=$2
    file="/etc/sysctl.conf"
    
    if grep -q "^$key" "$file"; then
        # å­˜åœ¨åˆ™æ›¿æ¢
        sudo sed -i "s/^$key.*/$key=$value/" "$file"
    else
        # ä¸å­˜åœ¨åˆ™è¿½åŠ 
        echo "$key=$value" | sudo tee -a "$file"
    fi
}

# åº”ç”¨ vm.swappiness = 60 (ZRAM ç¯å¢ƒä¸‹ä¿æŒé»˜è®¤ 60 æˆ–æ›´é«˜æ˜¯åˆç†çš„ï¼Œä¸è¦è®¾ä¸º 10)
update_sysctl "vm.swappiness" "60"

# åº”ç”¨ HDD ä¼˜åŒ–å‚æ•° (å‡å°‘è„é¡µç§¯å‹ï¼Œé˜²æ­¢æœºæ¢°ç¡¬ç›˜å‡æ­»)
# dirty_ratio=10: å†…å­˜ä¸­è„æ•°æ®è¾¾åˆ° 10% (çº¦800M) æ—¶ï¼Œè¿›ç¨‹å¿…é¡»è‡ªå·±å»å†™ç¡¬ç›˜
update_sysctl "vm.dirty_ratio" "10"

# dirty_background_ratio=5: å†…å­˜ä¸­è„æ•°æ®è¾¾åˆ° 5% (çº¦400M) æ—¶ï¼Œåå°å¼€å§‹æ‚„æ‚„å†™ç¡¬ç›˜
update_sysctl "vm.dirty_background_ratio" "5"

# 6. ç«‹åˆ»åº”ç”¨å†…æ ¸å‚æ•°
echo "âš¡ åº”ç”¨å†…æ ¸å‚æ•°..."
sudo sysctl -p

# 7. éªŒè¯ç»“æœ
echo "================================"
echo "âœ… ä¼˜åŒ–å®Œæˆï¼çŠ¶æ€æ£€æŸ¥ï¼š"
echo "--------------------------------"
echo "ã€ZRAM çŠ¶æ€ã€‘(åº”æ˜¾ç¤º /dev/zram0)"
zramctl
echo "--------------------------------"
echo "ã€Swap çŠ¶æ€ã€‘(ZRAM ä¼˜å…ˆçº§åº”æœ€é«˜)"
swapon --show
echo "--------------------------------"
echo "ã€HDD å†™å›ç­–ç•¥ã€‘(åº”ä¸º 10 å’Œ 5)"
sysctl vm.dirty_ratio vm.dirty_background_ratio
echo "================================"
```

### 3. ä¿å­˜å¹¶é€€å‡º
*   æŒ‰ `Ctrl + O` ï¼ˆä¿å­˜ï¼‰
*   æŒ‰ `Enter` ï¼ˆç¡®è®¤æ–‡ä»¶åï¼‰
*   æŒ‰ `Ctrl + X` ï¼ˆé€€å‡º nano ç¼–è¾‘å™¨ï¼‰

### 4. èµ‹äºˆæƒé™å¹¶è¿è¡Œ
åœ¨ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹ä¸¤è¡Œå‘½ä»¤ï¼š

```bash
# èµ‹äºˆè„šæœ¬æ‰§è¡Œæƒé™
chmod +x optimize.sh

# è¿è¡Œè„šæœ¬
sudo ./optimize.sh
```

---

### âœ… è¿è¡Œåå¦‚ä½•ç¡®è®¤æˆåŠŸï¼Ÿ

è„šæœ¬è¿è¡Œç»“æŸåï¼Œæœ€åä¼šè¾“å‡ºä¸€ä¸ªè¡¨æ ¼ã€‚è¯·æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š

1.  **ZRAM çŠ¶æ€**ï¼š
    çœ‹åˆ° `NAME` ä¸‹é¢æœ‰ `/dev/zram0`ï¼Œä¸” `DISKSIZE` å¤§æ¦‚åœ¨ `4.8G` å·¦å³ï¼ˆ8Gå†…å­˜çš„60%ï¼‰ã€‚
2.  **Swap çŠ¶æ€**ï¼š
    `zram0` çš„ `PRIORITY`ï¼ˆä¼˜å…ˆçº§ï¼‰åº”è¯¥æ˜¯ `100`ï¼Œè€ŒåŸæœ¬çš„ç£ç›˜åˆ†åŒºï¼ˆå¦‚æœæœ‰ï¼‰ä¼˜å…ˆçº§é€šå¸¸æ˜¯ `-2`ã€‚**ZRAM ä¼˜å…ˆçº§é«˜è¯´æ˜ç³»ç»Ÿä¼šä¼˜å…ˆç”¨å®ƒï¼Œè¿™æ‰æ˜¯æé€Ÿçš„å…³é”®ã€‚**
3.  **HDD ç­–ç•¥**ï¼š
    æœ€åä¸€è¡Œæ˜¾ç¤º `vm.dirty_ratio = 10` å’Œ `vm.dirty_background_ratio = 5`ï¼Œè¯´æ˜é’ˆå¯¹æœºæ¢°ç¡¬ç›˜çš„é˜²å¡é¡¿ä¼˜åŒ–å·²ç”Ÿæ•ˆã€‚

è¿™å°±å¤§åŠŸå‘Šæˆäº†ï¼ä½ å¯ä»¥è¯•ç€æ‰“å¼€å‡ åä¸ªæµè§ˆå™¨æ ‡ç­¾é¡µï¼Œæˆ–è€…æ‹·è´ä¸€ä¸ªå¤§æ–‡ä»¶ï¼Œä½“éªŒä¸€ä¸‹ç³»ç»Ÿæ˜¯å¦æ¯”ä¹‹å‰æ›´è·Ÿæ‰‹ã€‚

